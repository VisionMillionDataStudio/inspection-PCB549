# ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ç”µå­æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œç”µå­å…ƒä»¶çš„å¹¿æ³›åº”ç”¨ä½¿å¾—å…¶è´¨é‡æ§åˆ¶æˆä¸ºåˆ¶é€ ä¸šä¸­çš„ä¸€é¡¹é‡è¦ä»»åŠ¡ã€‚ç”µå­å…ƒä»¶çš„ç¼ºé™·ä¸ä»…ä¼šå½±å“äº§å“çš„æ€§èƒ½å’Œå¯é æ€§ï¼Œè¿˜å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œå¦‚ä½•é«˜æ•ˆã€å‡†ç¡®åœ°æ£€æµ‹ç”µå­å…ƒä»¶çš„ç¼ºé™·ï¼Œæˆä¸ºäº†è¡Œä¸šå†…äºŸå¾…è§£å†³çš„é—®é¢˜ã€‚ä¼ ç»Ÿçš„äººå·¥æ£€æµ‹æ–¹æ³•ç”±äºä¾èµ–äºäººå·¥ç»éªŒï¼Œå¾€å¾€é¢ä¸´æ•ˆç‡ä½ã€å‡†ç¡®æ€§å·®ç­‰é—®é¢˜ï¼Œéš¾ä»¥æ»¡è¶³ç°ä»£åˆ¶é€ ä¸šå¯¹è´¨é‡æ§åˆ¶çš„é«˜è¦æ±‚ã€‚å› æ­¤ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ çš„è‡ªåŠ¨åŒ–æ£€æµ‹ç³»ç»Ÿé€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚

YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹å› å…¶åœ¨å®æ—¶ç›®æ ‡æ£€æµ‹ä¸­çš„ä¼˜è¶Šæ€§èƒ½è€Œå—åˆ°å¹¿æ³›å…³æ³¨ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡æ›´é«˜çš„æ£€æµ‹ç²¾åº¦å’Œæ›´å¿«çš„å¤„ç†é€Ÿåº¦ï¼Œé€‚åˆäºå®æ—¶ç›‘æ§å’Œç¼ºé™·æ£€æµ‹çš„åº”ç”¨åœºæ™¯ã€‚ç„¶è€Œï¼Œé’ˆå¯¹ç”µå­å…ƒä»¶çš„ç¼ºé™·æ£€æµ‹ï¼ŒYOLOv8æ¨¡å‹ä»éœ€è¿›è¡Œä¸€å®šçš„æ”¹è¿›ï¼Œä»¥é€‚åº”ç‰¹å®šçš„æ£€æµ‹éœ€æ±‚å’Œæ•°æ®ç‰¹å¾ã€‚æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹ç³»ç»Ÿï¼Œä»¥æå‡æ£€æµ‹çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚

æœ¬ç ”ç©¶æ‰€ä½¿ç”¨çš„æ•°æ®é›†åŒ…å«2300å¼ å›¾åƒï¼Œæ¶µç›–äº†å››ç±»ç”µå­å…ƒä»¶ï¼šè¡¨é¢è´´è£…ç”µå®¹å™¨ï¼ˆCapacitor_SMDï¼‰ã€æ’è£…ç”µå®¹å™¨ï¼ˆCapacitor_THTï¼‰ã€è¡¨é¢è´´è£…ç”µé˜»å™¨ï¼ˆResistor_SMDï¼‰å’Œæ’è£…ç”µé˜»å™¨ï¼ˆResistor_THTï¼‰ã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©ä¸ä»…åæ˜ äº†ç”µå­å…ƒä»¶çš„å¤šæ ·æ€§ï¼Œä¹Ÿä»£è¡¨äº†åœ¨å®é™…ç”Ÿäº§ä¸­å¸¸è§çš„ç¼ºé™·ç±»å‹ã€‚é€šè¿‡å¯¹è¿™äº›æ•°æ®çš„æ·±å…¥åˆ†æå’Œå¤„ç†ï¼Œç ”ç©¶å°†é‡ç‚¹å…³æ³¨å¦‚ä½•æé«˜æ¨¡å‹åœ¨ä¸åŒç±»åˆ«å…ƒä»¶ä¸Šçš„æ£€æµ‹æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚èƒŒæ™¯å’Œå…‰ç…§æ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚

æ”¹è¿›YOLOv8æ¨¡å‹çš„ç ”ç©¶æ„ä¹‰åœ¨äºï¼Œä¸ä»…å¯ä»¥æå‡ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹çš„å‡†ç¡®æ€§ï¼Œè¿˜èƒ½å¤Ÿå®ç°æ›´é«˜çš„æ£€æµ‹é€Ÿåº¦ï¼Œä»è€Œæ»¡è¶³ç°ä»£ç”Ÿäº§çº¿å¯¹å®æ—¶ç›‘æ§çš„éœ€æ±‚ã€‚æ­¤å¤–ï¼Œè‡ªåŠ¨åŒ–æ£€æµ‹ç³»ç»Ÿçš„åº”ç”¨å°†å¤§å¹…é™ä½äººå·¥æˆæœ¬ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ï¼Œä¸ºä¼ä¸šå¸¦æ¥æ›´å¤§çš„ç»æµæ•ˆç›Šã€‚åŒæ—¶ï¼Œè¯¥ç³»ç»Ÿçš„æˆåŠŸåº”ç”¨ä¹Ÿå°†ä¸ºå…¶ä»–é¢†åŸŸçš„ç¼ºé™·æ£€æµ‹æä¾›å€Ÿé‰´ï¼Œæ¨åŠ¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨å·¥ä¸šè‡ªåŠ¨åŒ–ä¸­çš„å¹¿æ³›åº”ç”¨ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºæ„ä¹‰ï¼Œä¹Ÿå…·æœ‰å¹¿æ³›çš„å®é™…åº”ç”¨ä»·å€¼ã€‚é€šè¿‡æ·±å…¥æ¢ç´¢å’Œè§£å†³å½“å‰æ£€æµ‹æŠ€æœ¯ä¸­çš„éš¾ç‚¹é—®é¢˜ï¼Œæœ¬ç ”ç©¶å°†ä¸ºç”µå­åˆ¶é€ è¡Œä¸šçš„è´¨é‡æ§åˆ¶æä¾›æ–°çš„æ€è·¯å’Œæ–¹æ³•ï¼ŒåŠ©åŠ›å®ç°æ™ºèƒ½åˆ¶é€ çš„ç›®æ ‡ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1w9t5e3Ebi/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 4
names: ['Capacitor_SMD', 'Capacitor_THT', 'Resistor_SMD', 'Resistor_THT']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨ç°ä»£ç”µå­åˆ¶é€ ä¸šä¸­ï¼Œç¡®ä¿äº§å“è´¨é‡è‡³å…³é‡è¦ã€‚ä¸ºæ­¤ï¼Œå¼€å‘ä¸€ä¸ªé«˜æ•ˆçš„ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹ç³»ç»Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬ç ”ç©¶æ‰€é‡‡ç”¨çš„æ•°æ®é›†åä¸ºâ€œinspection PCBâ€ï¼Œè¯¥æ•°æ®é›†ä¸“é—¨ç”¨äºè®­ç»ƒå’Œæ”¹è¿›YOLOv8æ¨¡å‹ï¼Œä»¥å®ç°å¯¹ç”µå­å…ƒä»¶çš„ç²¾å‡†æ£€æµ‹å’Œç¼ºé™·è¯†åˆ«ã€‚æ•°æ®é›†çš„è®¾è®¡æ—¨åœ¨æ¶µç›–å¤šç§å¸¸è§çš„ç”µå­å…ƒä»¶ç±»å‹ï¼Œç¡®ä¿æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„å¹¿æ³›é€‚ç”¨æ€§å’Œé«˜æ•ˆæ€§ã€‚

â€œinspection PCBâ€æ•°æ®é›†åŒ…å«å››ä¸ªä¸»è¦ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯ï¼šè¡¨é¢è´´è£…ç”µå®¹å™¨ï¼ˆCapacitor_SMDï¼‰ã€æ’è£…ç”µå®¹å™¨ï¼ˆCapacitor_THTï¼‰ã€è¡¨é¢è´´è£…ç”µé˜»å™¨ï¼ˆResistor_SMDï¼‰å’Œæ’è£…ç”µé˜»å™¨ï¼ˆResistor_THTï¼‰ã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©åæ˜ äº†ç°ä»£ç”µè·¯æ¿ä¸Šæœ€å¸¸è§çš„ç”µå­å…ƒä»¶ç±»å‹ï¼Œæ¶µç›–äº†ä»æ¶ˆè´¹ç”µå­åˆ°å·¥ä¸šè®¾å¤‡ä¸­å¹¿æ³›ä½¿ç”¨çš„å…³é”®ç»„ä»¶ã€‚æ¯ä¸ªç±»åˆ«éƒ½å…·æœ‰ç‹¬ç‰¹çš„ç‰©ç†ç‰¹å¾å’Œæ½œåœ¨çš„ç¼ºé™·ç±»å‹ï¼Œå› æ­¤åœ¨æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œç¡®ä¿æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬å…·æœ‰è¶³å¤Ÿçš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚

åœ¨æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œç ”ç©¶å›¢é˜Ÿæ”¶é›†äº†å¤§é‡çš„å›¾åƒæ•°æ®ï¼Œè¿™äº›å›¾åƒæ¶µç›–äº†ä¸åŒçš„æ‹æ‘„è§’åº¦ã€å…‰ç…§æ¡ä»¶å’ŒèƒŒæ™¯ç¯å¢ƒã€‚è¿™ç§å¤šæ ·æ€§ä¸ä»…æé«˜äº†æ¨¡å‹çš„é²æ£’æ€§ï¼Œè¿˜å¢å¼ºäº†å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„é€‚åº”èƒ½åŠ›ã€‚æ¯ä¸ªç±»åˆ«çš„å›¾åƒå‡ç»è¿‡ç²¾å¿ƒæ ‡æ³¨ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å‡ºæ¯ç§ç”µå­å…ƒä»¶åŠå…¶å¯èƒ½å­˜åœ¨çš„ç¼ºé™·ã€‚è¿™äº›ç¼ºé™·å¯èƒ½åŒ…æ‹¬ç„Šæ¥ä¸è‰¯ã€å…ƒä»¶é”™ä½ã€è¡¨é¢æ±¡æŸ“ç­‰ï¼Œéƒ½æ˜¯å½±å“ç”µå­äº§å“æ€§èƒ½å’Œå¯é æ€§çš„å…³é”®å› ç´ ã€‚

ä¸ºäº†æé«˜æ¨¡å‹çš„è®­ç»ƒæ•ˆæœï¼Œæ•°æ®é›†è¿˜åŒ…å«äº†å¤šç§æ•°æ®å¢å¼ºæŠ€æœ¯çš„åº”ç”¨ã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬éšæœºè£å‰ªã€æ—‹è½¬ã€äº®åº¦è°ƒæ•´ç­‰ï¼Œæ—¨åœ¨å¢åŠ è®­ç»ƒæ ·æœ¬çš„å¤šæ ·æ€§ï¼Œé˜²æ­¢æ¨¡å‹è¿‡æ‹Ÿåˆã€‚é€šè¿‡è¿™äº›æ‰‹æ®µï¼Œç ”ç©¶å›¢é˜Ÿå¸Œæœ›èƒ½å¤Ÿè®­ç»ƒå‡ºä¸€ä¸ªå…·æœ‰è¾ƒå¼ºæ³›åŒ–èƒ½åŠ›çš„YOLOv8æ¨¡å‹ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ä¸åŒçš„ç”Ÿäº§ç¯å¢ƒä¸­å‡†ç¡®è¯†åˆ«å’Œåˆ†ç±»ç”µå­å…ƒä»¶ã€‚

åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ•°æ®é›†çš„è´¨é‡å’Œå¤šæ ·æ€§ç›´æ¥å½±å“åˆ°æœ€ç»ˆæ£€æµ‹ç³»ç»Ÿçš„æ€§èƒ½ã€‚å› æ­¤ï¼Œç ”ç©¶å›¢é˜Ÿåœ¨æ•°æ®é›†çš„æ„å»ºå’Œæ ‡æ³¨è¿‡ç¨‹ä¸­ï¼Œä¸¥æ ¼éµå¾ªæ•°æ®ç§‘å­¦çš„æœ€ä½³å®è·µï¼Œç¡®ä¿æ¯ä¸ªæ ·æœ¬çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†çš„è®¾è®¡è¿˜è€ƒè™‘åˆ°äº†æœªæ¥çš„æ‰©å±•æ€§ï¼Œç ”ç©¶å›¢é˜Ÿè®¡åˆ’åœ¨åç»­çš„å·¥ä½œä¸­ï¼Œé€æ­¥å¢åŠ æ›´å¤šç±»åˆ«çš„ç”µå­å…ƒä»¶å’Œç¼ºé™·ç±»å‹ï¼Œä»¥è¿›ä¸€æ­¥æå‡æ£€æµ‹ç³»ç»Ÿçš„å…¨é¢æ€§å’Œå®ç”¨æ€§ã€‚

æ€»ä¹‹ï¼Œâ€œinspection PCBâ€æ•°æ®é›†ä¸ºæ”¹è¿›YOLOv8çš„ç”µå­å…ƒä»¶ç¼ºé™·æ£€æµ‹ç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ç±»åˆ«ç»“æ„å’Œä¸°å¯Œçš„æ ·æœ¬æ•°æ®ï¼Œè¯¥æ•°æ®é›†ä¸ä»…èƒ½å¤Ÿæœ‰æ•ˆæ”¯æŒæ¨¡å‹çš„è®­ç»ƒï¼Œè¿˜ä¸ºåç»­çš„ç ”ç©¶å’Œåº”ç”¨å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ã€‚éšç€ç”µå­äº§å“çš„ä¸æ–­å‘å±•å’Œå¸‚åœºéœ€æ±‚çš„å˜åŒ–ï¼ŒæŒç»­ä¼˜åŒ–å’Œæ‰©å±•æ•°æ®é›†å°†æ˜¯æœªæ¥ç ”ç©¶çš„é‡è¦æ–¹å‘ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ä½œä¸ºç›®æ ‡æ£€æµ‹é¢†åŸŸçš„æœ€æ–°ä»£è¡¨ï¼Œå»¶ç»­äº†YOLOç³»åˆ—ç®—æ³•çš„ä¼˜è‰¯ä¼ ç»Ÿï¼ŒåŒæ—¶åœ¨å¤šä¸ªæ–¹é¢è¿›è¡Œäº†åˆ›æ–°å’Œä¼˜åŒ–ã€‚å…¶æ ¸å¿ƒç»“æ„ç”±è¾“å…¥å±‚ã€ä¸»å¹²ç½‘ç»œã€é¢ˆéƒ¨ç½‘ç»œå’Œå¤´éƒ¨ç½‘ç»œæ„æˆï¼Œå½¢æˆäº†ä¸€ä¸ªé«˜æ•ˆä¸”çµæ´»çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ã€‚é€šè¿‡å¯¹è¾“å…¥å›¾åƒè¿›è¡Œç¼©æ”¾å¤„ç†ï¼ŒYOLOv8èƒ½å¤Ÿé€‚åº”ä¸åŒçš„è¾“å…¥å°ºå¯¸éœ€æ±‚ï¼Œä»è€Œä¸ºåç»­çš„ç‰¹å¾æå–å’Œç›®æ ‡æ£€æµ‹å¥ å®šåŸºç¡€ã€‚

åœ¨ä¸»å¹²ç½‘ç»œéƒ¨åˆ†ï¼ŒYOLOv8é‡‡ç”¨äº†å·ç§¯æ“ä½œè¿›è¡Œç‰¹å¾çš„ä¸‹é‡‡æ ·ï¼Œåˆ©ç”¨æ‰¹å½’ä¸€åŒ–å’ŒSiLURæ¿€æ´»å‡½æ•°å¢å¼ºäº†ç‰¹å¾æå–çš„èƒ½åŠ›ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒYOLOv8å¼•å…¥äº†C2fæ¨¡å—ï¼Œè¿™ä¸€æ¨¡å—åœ¨YOLOv5çš„C3æ¨¡å—åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œç»“åˆäº†YOLOv7ä¸­çš„ELANç»“æ„ï¼Œé€šè¿‡è·¨å±‚åˆ†æ”¯è¿æ¥æ¥å¢å¼ºæ¨¡å‹çš„æ¢¯åº¦æµã€‚è¿™ç§è®¾è®¡ä¸ä»…æé«˜äº†ç‰¹å¾æå–çš„æ•ˆç‡ï¼Œè¿˜åœ¨è½»é‡åŒ–çš„åŸºç¡€ä¸Šä¸°å¯Œäº†æ¨¡å‹çš„æ¢¯åº¦ä¿¡æ¯ï¼Œä½¿å¾—YOLOv8åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ã€‚

åœ¨ä¸»å¹²ç½‘ç»œçš„æœ«å°¾ï¼ŒYOLOv8å¼•å…¥äº†SPPFlæ¨¡å—ï¼Œé€šè¿‡ä¸‰ä¸ªæœ€å¤§æ± åŒ–å±‚å¤„ç†å¤šå°ºåº¦ç‰¹å¾ï¼Œä»è€Œæå‡äº†ç½‘ç»œçš„ç‰¹å¾æŠ½è±¡èƒ½åŠ›ã€‚è¿™ä¸€è®¾è®¡ä½¿å¾—YOLOv8èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ä¸åŒå°ºå¯¸ç›®æ ‡çš„æ£€æµ‹ä»»åŠ¡ï¼Œå¢å¼ºäº†æ¨¡å‹çš„é€‚åº”æ€§å’Œé²æ£’æ€§ã€‚

é¢ˆéƒ¨ç½‘ç»œåˆ™åˆ©ç”¨äº†PAN-FPNç»“æ„æ¥èåˆä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ä¿¡æ¯ã€‚PANç»“æ„çš„å¼•å…¥ï¼Œä½¿å¾—YOLOv8èƒ½å¤Ÿæœ‰æ•ˆåœ°ç»“åˆæ¥è‡ªä¸»å¹²ç½‘ç»œçš„å¤šå±‚ç‰¹å¾ï¼Œä»è€Œåœ¨ç›®æ ‡æ£€æµ‹è¿‡ç¨‹ä¸­æ›´å¥½åœ°æ•æ‰åˆ°ç›®æ ‡çš„ç»†èŠ‚ä¿¡æ¯ã€‚è¿™ä¸€éƒ¨åˆ†çš„è®¾è®¡å¯¹äºæå‡æ£€æµ‹ç²¾åº¦å’Œå¬å›ç‡è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†æ¨¡å‹èƒ½å¤Ÿç»¼åˆè€ƒè™‘å¤šå±‚æ¬¡çš„ç‰¹å¾ä¿¡æ¯ã€‚

YOLOv8çš„å¤´éƒ¨ç½‘ç»œé‡‡ç”¨äº†è§£è€¦åˆçš„æ£€æµ‹å¤´ç»“æ„ï¼Œå°†åˆ†ç±»å’Œæ£€æµ‹ä»»åŠ¡åˆ†ç¦»å¼€æ¥ã€‚è¿™æ ·çš„è®¾è®¡ä¸ä»…æå‡äº†æ¨¡å‹çš„æ¨ç†é€Ÿåº¦ï¼Œè¿˜æé«˜äº†åˆ†ç±»å’Œå›å½’çš„ç²¾åº¦ã€‚YOLOv8çš„æ£€æµ‹å¤´é€šè¿‡ä¸¤ä¸ªå¹¶è¡Œçš„å·ç§¯åˆ†æ”¯åˆ†åˆ«è®¡ç®—å›å½’å’Œç±»åˆ«çš„æŸå¤±ï¼Œè¿™ç§è§£è€¦åˆçš„æ–¹å¼ä½¿å¾—æ¨¡å‹åœ¨å¤„ç†å¤æ‚åœºæ™¯æ—¶ï¼Œèƒ½å¤Ÿæ›´ä¸ºç²¾å‡†åœ°è¿›è¡Œç›®æ ‡å®šä½å’Œåˆ†ç±»ã€‚

åœ¨æŸå¤±è®¡ç®—æ–¹é¢ï¼ŒYOLOv8é‡‡ç”¨äº†BCELossä½œä¸ºåˆ†ç±»æŸå¤±ï¼ŒDFLLosså’ŒCIoULossä½œä¸ºå›å½’æŸå¤±ã€‚è¿™ç§å¤šæ ·åŒ–çš„æŸå¤±å‡½æ•°è®¾è®¡ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç¨³å®šæ€§å’Œæ”¶æ•›é€Ÿåº¦ã€‚é€šè¿‡åŠ¨æ€Task-Aligned Assigneræ ·æœ¬åˆ†é…ç­–ç•¥ï¼ŒYOLOv8åœ¨è®­ç»ƒé˜¶æ®µèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°åˆ©ç”¨æ•°æ®ï¼Œä»è€Œæå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒYOLOv8åœ¨æ¨¡å‹çš„è®¾ç½®ä¸Šæä¾›äº†å¤šç§é€‰æ‹©ï¼ŒåŒ…æ‹¬nã€sã€mã€lã€xäº”ç§ä¸åŒå°ºåº¦çš„æ¨¡å‹ã€‚æ¯ç§æ¨¡å‹åœ¨æ·±åº¦ã€å®½åº¦å’Œç‰¹å¾å›¾çš„é€šé“æ•°ä¸Šéƒ½æœ‰æ‰€ä¸åŒï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯çš„éœ€æ±‚ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—YOLOv8èƒ½å¤Ÿå¹¿æ³›åº”ç”¨äºå„ç±»ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œä»è€Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8é€šè¿‡å¯¹ä¸»å¹²ç½‘ç»œã€é¢ˆéƒ¨ç½‘ç»œå’Œå¤´éƒ¨ç½‘ç»œçš„ç²¾å¿ƒè®¾è®¡ä¸ä¼˜åŒ–ï¼Œå½¢æˆäº†ä¸€ä¸ªé«˜æ•ˆã€ç²¾å‡†çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ã€‚å…¶åˆ›æ–°çš„C2fæ¨¡å—ã€è§£è€¦åˆçš„æ£€æµ‹å¤´ç»“æ„ä»¥åŠå¤šæ ·åŒ–çš„æŸå¤±å‡½æ•°è®¾è®¡ï¼Œä½¿å¾—YOLOv8åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸä¸­å…·å¤‡äº†æ›´å¿«çš„æ¨ç†é€Ÿåº¦å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—YOLOv8ä¸ä»…åœ¨å­¦æœ¯ç•Œå—åˆ°å¹¿æ³›å…³æ³¨ï¼Œä¹Ÿåœ¨å·¥ä¸šç•Œå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œæˆä¸ºäº†ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­çš„ä¸€é¡¹é‡è¦å·¥å…·ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 code\ultralytics\models\yolo\segment\predict.py

ä»¥ä¸‹æ˜¯å¯¹ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œæç‚¼å’Œè¯¦ç»†æ³¨é‡Šçš„ç»“æœï¼š

```python
# å¯¼å…¥å¿…è¦çš„æ¨¡å—å’Œç±»
from ultralytics.engine.results import Results
from ultralytics.models.yolo.detect.predict import DetectionPredictor
from ultralytics.utils import DEFAULT_CFG, ops

class SegmentationPredictor(DetectionPredictor):
    """
    SegmentationPredictorç±»ï¼Œç»§æ‰¿è‡ªDetectionPredictorç±»ï¼Œç”¨äºåŸºäºåˆ†å‰²æ¨¡å‹çš„é¢„æµ‹ã€‚
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """
        åˆå§‹åŒ–SegmentationPredictorï¼Œè®¾ç½®é…ç½®ã€è¦†ç›–å‚æ•°å’Œå›è°ƒå‡½æ•°ã€‚
        
        å‚æ•°:
        - cfg: é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºDEFAULT_CFG
        - overrides: è¦†ç›–é…ç½®çš„å‚æ•°
        - _callbacks: å›è°ƒå‡½æ•°
        """
        super().__init__(cfg, overrides, _callbacks)  # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
        self.args.task = "segment"  # è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºåˆ†å‰²

    def postprocess(self, preds, img, orig_imgs):
        """
        å¯¹æ¯ä¸ªè¾“å…¥å›¾åƒçš„é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬éæå¤§å€¼æŠ‘åˆ¶å’Œæ©è†œå¤„ç†ã€‚
        
        å‚æ•°:
        - preds: æ¨¡å‹çš„é¢„æµ‹ç»“æœ
        - img: è¾“å…¥å›¾åƒ
        - orig_imgs: åŸå§‹è¾“å…¥å›¾åƒ

        è¿”å›:
        - results: å¤„ç†åçš„ç»“æœåˆ—è¡¨
        """
        # åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼Œè¿‡æ»¤æ‰å†—ä½™çš„æ£€æµ‹æ¡†
        p = ops.non_max_suppression(
            preds[0],  # é¢„æµ‹æ¡†
            self.args.conf,  # ç½®ä¿¡åº¦é˜ˆå€¼
            self.args.iou,  # IOUé˜ˆå€¼
            agnostic=self.args.agnostic_nms,  # æ˜¯å¦ä½¿ç”¨ç±»åˆ«æ— å…³çš„NMS
            max_det=self.args.max_det,  # æœ€å¤§æ£€æµ‹æ¡†æ•°é‡
            nc=len(self.model.names),  # ç±»åˆ«æ•°é‡
            classes=self.args.classes,  # æŒ‡å®šçš„ç±»åˆ«
        )

        # å¦‚æœè¾“å…¥å›¾åƒä¸æ˜¯åˆ—è¡¨ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºnumpyæ•°ç»„
        if not isinstance(orig_imgs, list):
            orig_imgs = ops.convert_torch2numpy_batch(orig_imgs)

        results = []  # åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        proto = preds[1][-1] if len(preds[1]) == 3 else preds[1]  # è·å–æ©è†œåŸå‹

        # éå†æ¯ä¸ªé¢„æµ‹ç»“æœ
        for i, pred in enumerate(p):
            orig_img = orig_imgs[i]  # è·å–åŸå§‹å›¾åƒ
            img_path = self.batch[0][i]  # è·å–å›¾åƒè·¯å¾„

            if not len(pred):  # å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°æ¡†
                masks = None  # æ©è†œè®¾ç½®ä¸ºNone
            elif self.args.retina_masks:  # å¦‚æœä½¿ç”¨Retinaæ©è†œ
                # å¯¹é¢„æµ‹æ¡†è¿›è¡Œç¼©æ”¾
                pred[:, :4] = ops.scale_boxes(img.shape[2:], pred[:, :4], orig_img.shape)
                # å¤„ç†æ©è†œ
                masks = ops.process_mask_native(proto[i], pred[:, 6:], pred[:, :4], orig_img.shape[:2])  # HWC
            else:  # å¦åˆ™ä½¿ç”¨æ™®é€šæ©è†œå¤„ç†
                masks = ops.process_mask(proto[i], pred[:, 6:], pred[:, :4], img.shape[2:], upsample=True)  # HWC
                # å¯¹é¢„æµ‹æ¡†è¿›è¡Œç¼©æ”¾
                pred[:, :4] = ops.scale_boxes(img.shape[2:], pred[:, :4], orig_img.shape)

            # å°†ç»“æœæ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            results.append(Results(orig_img, path=img_path, names=self.model.names, boxes=pred[:, :6], masks=masks))

        return results  # è¿”å›å¤„ç†åçš„ç»“æœåˆ—è¡¨
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **ç±»å®šä¹‰**ï¼š`SegmentationPredictor`ç±»ç”¨äºå›¾åƒåˆ†å‰²ä»»åŠ¡ï¼Œç»§æ‰¿è‡ª`DetectionPredictor`ç±»ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºåˆ†å‰²ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚
3. **åå¤„ç†æ–¹æ³•**ï¼š`postprocess`æ–¹æ³•è´Ÿè´£å¯¹æ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬éæå¤§å€¼æŠ‘åˆ¶ã€æ©è†œå¤„ç†å’Œç»“æœçš„ç»„ç»‡ã€‚å¤„ç†åçš„ç»“æœä»¥`Results`å¯¹è±¡çš„å½¢å¼è¿”å›ï¼ŒåŒ…å«åŸå§‹å›¾åƒã€è·¯å¾„ã€ç±»åˆ«åç§°ã€æ£€æµ‹æ¡†å’Œæ©è†œä¿¡æ¯ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOï¼ˆYou Only Look Onceï¼‰æ¨¡å‹çš„åˆ†å‰²é¢„æµ‹çš„å®ç°ï¼Œå…·ä½“æ˜¯Ultralytics YOLOæ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º`SegmentationPredictor`çš„ç±»ï¼Œå®ƒç»§æ‰¿è‡ª`DetectionPredictor`ç±»ï¼Œä¸»è¦ç”¨äºåŸºäºåˆ†å‰²æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚

åœ¨ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œç»™å‡ºäº†ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•å¯¼å…¥è¯¥ç±»å¹¶è¿›è¡Œå®ä¾‹åŒ–ä»¥åŠè°ƒç”¨é¢„æµ‹åŠŸèƒ½ã€‚ç¤ºä¾‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¼ å…¥æ¨¡å‹æ–‡ä»¶å’Œæ•°æ®æºæ¥åˆ›å»º`SegmentationPredictor`çš„å®ä¾‹ï¼Œå¹¶ä½¿ç”¨`predict_cli()`æ–¹æ³•è¿›è¡Œé¢„æµ‹ã€‚

æ„é€ å‡½æ•°`__init__`ç”¨äºåˆå§‹åŒ–`SegmentationPredictor`ï¼Œå®ƒæ¥å—é…ç½®å‚æ•°ã€è¦†ç›–å‚æ•°å’Œå›è°ƒå‡½æ•°ã€‚é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œè®¾ç½®äº†ä¸€äº›åŸºæœ¬çš„é…ç½®ï¼Œå¹¶å°†ä»»åŠ¡ç±»å‹æŒ‡å®šä¸ºâ€œsegmentâ€ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåˆ†å‰²ä»»åŠ¡ã€‚

`postprocess`æ–¹æ³•æ˜¯è¯¥ç±»çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£å¯¹æ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥æ–¹æ³•é¦–å…ˆåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNon-Maximum Suppression, NMSï¼‰æ¥è¿‡æ»¤æ‰å†—ä½™çš„æ£€æµ‹æ¡†ï¼Œç¡®ä¿æ¯ä¸ªç›®æ ‡åªä¿ç•™ä¸€ä¸ªæœ€ä½³æ¡†ã€‚æ¥ç€ï¼Œæ–¹æ³•ä¼šæ£€æŸ¥è¾“å…¥çš„åŸå§‹å›¾åƒæ˜¯å¦ä¸ºåˆ—è¡¨ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºNumPyæ•°ç»„æ ¼å¼ã€‚

åœ¨å¤„ç†æ¯ä¸ªé¢„æµ‹ç»“æœæ—¶ï¼Œæ–¹æ³•ä¼šæ ¹æ®é¢„æµ‹çš„å†…å®¹å’Œè®¾ç½®çš„å‚æ•°ï¼Œç”Ÿæˆç›¸åº”çš„æ©è†œï¼ˆmasksï¼‰ã€‚å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°ç›®æ ‡ï¼Œæ©è†œå°†è®¾ç½®ä¸º`None`ã€‚å¦‚æœå¯ç”¨äº†`retina_masks`é€‰é¡¹ï¼Œæ–¹æ³•ä¼šä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼æ¥ç”Ÿæˆæ©è†œã€‚æœ€ç»ˆï¼Œæ‰€æœ‰çš„ç»“æœéƒ½ä¼šè¢«å°è£…æˆ`Results`å¯¹è±¡ï¼ŒåŒ…å«åŸå§‹å›¾åƒã€è·¯å¾„ã€ç±»åˆ«åç§°ã€æ£€æµ‹æ¡†å’Œæ©è†œç­‰ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ç»“æœä»¥åˆ—è¡¨çš„å½¢å¼è¿”å›ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºYOLOæ¨¡å‹çš„åˆ†å‰²ä»»åŠ¡æä¾›é¢„æµ‹å’Œåå¤„ç†çš„å®ç°ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°ä½¿ç”¨è¯¥æ¨¡å‹è¿›è¡Œå›¾åƒåˆ†å‰²ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šæ‚¨çš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬åç§°

    # è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `import sys`ï¼šå¯¼å…¥ sys æ¨¡å—ï¼Œä»¥ä¾¿è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `import subprocess`ï¼šå¯¼å…¥ subprocess æ¨¡å—ï¼Œç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **å®šä¹‰å‡½æ•° `run_script`**ï¼š
   - è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - å‡½æ•°å†…éƒ¨é¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼ˆ`sys.executable`ï¼‰ï¼Œç„¶åæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œç”¨äºè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

3. **æ„å»ºå‘½ä»¤**ï¼š
   - ä½¿ç”¨ f-string æ ¼å¼åŒ–å‘½ä»¤ï¼Œè°ƒç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

4. **æ‰§è¡Œå‘½ä»¤**ï¼š
   - ä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶é€šè¿‡ `shell=True` é€‰é¡¹å…è®¸åœ¨ shell ä¸­æ‰§è¡Œã€‚
   - æ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

5. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰ä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼ˆè¿™é‡Œç›´æ¥ä½¿ç”¨ `"web.py"`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯è¿è¡Œä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œè¿™äº›æ¨¡å—åˆ†åˆ«ç”¨äºå¤„ç†ç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½ã€æ–‡ä»¶è·¯å¾„æ“ä½œå’Œæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œä½¿ç”¨äº† Python çš„ `-m` é€‰é¡¹æ¥æŒ‡å®šæ¨¡å—ï¼Œåé¢è·Ÿä¸Šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ã€‚

éšåï¼Œç¨‹åºä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªæ–°çš„ shell ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚æ‰§è¡Œå®Œå‘½ä»¤åï¼Œç¨‹åºæ£€æŸ¥è¿”å›ç ï¼Œå¦‚æœè¿”å›ç ä¸ä¸ºé›¶ï¼Œè¯´æ˜è„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ­¤æ—¶ä¼šæ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œç¨‹åºé€šè¿‡ `if __name__ == "__main__":` è¿™ä¸€æ¡ä»¶åˆ¤æ–­æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚åœ¨è¿™é‡Œï¼ŒæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è¿è¡Œä¸€ä¸ªç‰¹å®šçš„ Python è„šæœ¬ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¤„ç†è¿è¡Œè¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚

#### 11.3 code\ultralytics\data\augment.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class BaseTransform:
    """
    å›¾åƒå˜æ¢çš„åŸºç±»ã€‚

    è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„å˜æ¢ç±»ï¼Œå¯ä»¥æ‰©å±•ä»¥æ»¡è¶³ç‰¹å®šçš„å›¾åƒå¤„ç†éœ€æ±‚ã€‚
    è¯¥ç±»æ—¨åœ¨ä¸åˆ†ç±»å’Œè¯­ä¹‰åˆ†å‰²ä»»åŠ¡å…¼å®¹ã€‚

    æ–¹æ³•ï¼š
        __init__: åˆå§‹åŒ– BaseTransform å¯¹è±¡ã€‚
        apply_image: å¯¹æ ‡ç­¾åº”ç”¨å›¾åƒå˜æ¢ã€‚
        apply_instances: å¯¹æ ‡ç­¾ä¸­çš„å¯¹è±¡å®ä¾‹åº”ç”¨å˜æ¢ã€‚
        apply_semantic: å¯¹å›¾åƒåº”ç”¨è¯­ä¹‰åˆ†å‰²ã€‚
        __call__: å¯¹å›¾åƒã€å®ä¾‹å’Œè¯­ä¹‰æ©ç åº”ç”¨æ‰€æœ‰æ ‡ç­¾å˜æ¢ã€‚
    """

    def __init__(self) -> None:
        """åˆå§‹åŒ– BaseTransform å¯¹è±¡ã€‚"""
        pass

    def apply_image(self, labels):
        """å¯¹æ ‡ç­¾åº”ç”¨å›¾åƒå˜æ¢ã€‚"""
        pass

    def apply_instances(self, labels):
        """å¯¹æ ‡ç­¾ä¸­çš„å¯¹è±¡å®ä¾‹åº”ç”¨å˜æ¢ã€‚"""
        pass

    def apply_semantic(self, labels):
        """å¯¹å›¾åƒåº”ç”¨è¯­ä¹‰åˆ†å‰²ã€‚"""
        pass

    def __call__(self, labels):
        """å¯¹å›¾åƒã€å®ä¾‹å’Œè¯­ä¹‰æ©ç åº”ç”¨æ‰€æœ‰æ ‡ç­¾å˜æ¢ã€‚"""
        self.apply_image(labels)
        self.apply_instances(labels)
        self.apply_semantic(labels)


class Mosaic(BaseMixTransform):
    """
    Mosaic å¢å¼ºã€‚

    è¯¥ç±»é€šè¿‡å°†å¤šä¸ªï¼ˆ4 æˆ– 9ï¼‰å¼ å›¾åƒç»„åˆæˆä¸€å¼ é©¬èµ›å…‹å›¾åƒæ¥æ‰§è¡Œé©¬èµ›å…‹å¢å¼ºã€‚
    å¢å¼ºä»¥ç»™å®šçš„æ¦‚ç‡åº”ç”¨äºæ•°æ®é›†ã€‚

    å±æ€§ï¼š
        dataset: åº”ç”¨é©¬èµ›å…‹å¢å¼ºçš„æ•°æ®é›†ã€‚
        imgsz (int, optional): å•å¼ å›¾åƒé©¬èµ›å…‹ç®¡é“åçš„å›¾åƒå¤§å°ï¼ˆé«˜åº¦å’Œå®½åº¦ï¼‰ã€‚é»˜è®¤ä¸º 640ã€‚
        p (float, optional): åº”ç”¨é©¬èµ›å…‹å¢å¼ºçš„æ¦‚ç‡ã€‚å¿…é¡»åœ¨ 0-1 èŒƒå›´å†…ã€‚é»˜è®¤ä¸º 1.0ã€‚
        n (int, optional): ç½‘æ ¼å¤§å°ï¼Œ4ï¼ˆ2x2ï¼‰æˆ– 9ï¼ˆ3x3ï¼‰ã€‚
    """

    def __init__(self, dataset, imgsz=640, p=1.0, n=4):
        """åˆå§‹åŒ–å¯¹è±¡ï¼Œä¼ å…¥æ•°æ®é›†ã€å›¾åƒå¤§å°ã€æ¦‚ç‡å’Œè¾¹ç•Œã€‚"""
        assert 0 <= p <= 1.0, f"æ¦‚ç‡åº”åœ¨ [0, 1] èŒƒå›´å†…ï¼Œä½†å¾—åˆ° {p}ã€‚"
        assert n in (4, 9), "ç½‘æ ¼å¿…é¡»ç­‰äº 4 æˆ– 9ã€‚"
        super().__init__(dataset=dataset, p=p)
        self.dataset = dataset
        self.imgsz = imgsz
        self.border = (-imgsz // 2, -imgsz // 2)  # å®½åº¦ï¼Œé«˜åº¦
        self.n = n

    def get_indexes(self, buffer=True):
        """è¿”å›æ•°æ®é›†ä¸­éšæœºç´¢å¼•çš„åˆ—è¡¨ã€‚"""
        if buffer:  # ä»ç¼“å†²åŒºé€‰æ‹©å›¾åƒ
            return random.choices(list(self.dataset.buffer), k=self.n - 1)
        else:  # é€‰æ‹©ä»»æ„å›¾åƒ
            return [random.randint(0, len(self.dataset) - 1) for _ in range(self.n - 1)]

    def _mix_transform(self, labels):
        """å¯¹æ ‡ç­¾å­—å…¸åº”ç”¨ MixUp æˆ– Mosaic å¢å¼ºã€‚"""
        assert labels.get("rect_shape", None) is None, "rect å’Œ mosaic æ˜¯äº’æ–¥çš„ã€‚"
        assert len(labels.get("mix_labels", [])), "æ²¡æœ‰å…¶ä»–å›¾åƒç”¨äºé©¬èµ›å…‹å¢å¼ºã€‚"
        return (
            self._mosaic3(labels) if self.n == 3 else self._mosaic4(labels) if self.n == 4 else self._mosaic9(labels)
        )

    def _mosaic4(self, labels):
        """åˆ›å»º 2x2 å›¾åƒé©¬èµ›å…‹ã€‚"""
        mosaic_labels = []
        s = self.imgsz
        yc, xc = (int(random.uniform(-x, 2 * s + x)) for x in self.border)  # é©¬èµ›å…‹ä¸­å¿ƒ x, y
        for i in range(4):
            labels_patch = labels if i == 0 else labels["mix_labels"][i - 1]
            img = labels_patch["img"]
            h, w = labels_patch.pop("resized_shape")

            # å°†å›¾åƒæ”¾ç½®åœ¨ img4 ä¸­
            if i == 0:  # å·¦ä¸Šè§’
                img4 = np.full((s * 2, s * 2, img.shape[2]), 114, dtype=np.uint8)  # åŸºç¡€å›¾åƒï¼ŒåŒ…å« 4 ä¸ªå›¾å—
                x1a, y1a, x2a, y2a = max(xc - w, 0), max(yc - h, 0), xc, yc  # xmin, ymin, xmax, ymaxï¼ˆå¤§å›¾åƒï¼‰
                x1b, y1b, x2b, y2b = w - (x2a - x1a), h - (y2a - y1a), w, h  # xmin, ymin, xmax, ymaxï¼ˆå°å›¾åƒï¼‰
            elif i == 1:  # å³ä¸Šè§’
                x1a, y1a, x2a, y2a = xc, max(yc - h, 0), min(xc + w, s * 2), yc
                x1b, y1b, x2b, y2b = 0, h - (y2a - y1a), min(w, x2a - x1a), h
            elif i == 2:  # å·¦ä¸‹è§’
                x1a, y1a, x2a, y2a = max(xc - w, 0), yc, xc, min(s * 2, yc + h)
                x1b, y1b, x2b, y2b = w - (x2a - x1a), 0, w, min(y2a - y1a, h)
            elif i == 3:  # å³ä¸‹è§’
                x1a, y1a, x2a, y2a = xc, yc, min(xc + w, s * 2), min(s * 2, yc + h)
                x1b, y1b, x2b, y2b = 0, 0, min(w, x2a - x1a), min(y2a - y1a, h)

            img4[y1a:y2a, x1a:x2a] = img[y1b:y2b, x1b:x2b]  # img4[ymin:ymax, xmin:xmax]
            padw = x1a - x1b
            padh = y1a - y1b

            labels_patch = self._update_labels(labels_patch, padw, padh)
            mosaic_labels.append(labels_patch)
        final_labels = self._cat_labels(mosaic_labels)
        final_labels["img"] = img4
        return final_labels

    @staticmethod
    def _update_labels(labels, padw, padh):
        """æ›´æ–°æ ‡ç­¾ã€‚"""
        nh, nw = labels["img"].shape[:2]
        labels["instances"].convert_bbox(format="xyxy")
        labels["instances"].denormalize(nw, nh)
        labels["instances"].add_padding(padw, padh)
        return labels

    def _cat_labels(self, mosaic_labels):
        """è¿”å›å¸¦æœ‰é©¬èµ›å…‹è¾¹ç•Œå®ä¾‹è£å‰ªçš„æ ‡ç­¾ã€‚"""
        if len(mosaic_labels) == 0:
            return {}
        cls = []
        instances = []
        imgsz = self.imgsz * 2  # é©¬èµ›å…‹å›¾åƒå¤§å°
        for labels in mosaic_labels:
            cls.append(labels["cls"])
            instances.append(labels["instances"])
        # æœ€ç»ˆæ ‡ç­¾
        final_labels = {
            "im_file": mosaic_labels[0]["im_file"],
            "ori_shape": mosaic_labels[0]["ori_shape"],
            "resized_shape": (imgsz, imgsz),
            "cls": np.concatenate(cls, 0),
            "instances": Instances.concatenate(instances, axis=0),
            "mosaic_border": self.border,
        }
        final_labels["instances"].clip(imgsz, imgsz)
        good = final_labels["instances"].remove_zero_area_boxes()
        final_labels["cls"] = final_labels["cls"][good]
        return final_labels
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜
1. **BaseTransform ç±»**ï¼šå®šä¹‰äº†å›¾åƒå˜æ¢çš„åŸºç±»ï¼ŒåŒ…å«åº”ç”¨å›¾åƒã€å®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²çš„æ–¹æ³•ï¼Œä¾¿äºæ‰©å±•å’Œå®ç°å…·ä½“çš„å˜æ¢ã€‚
2. **Mosaic ç±»**ï¼šå®ç°äº†é©¬èµ›å…‹å¢å¼ºï¼Œé€šè¿‡å°†å¤šå¼ å›¾åƒç»„åˆæˆä¸€å¼ é©¬èµ›å…‹å›¾åƒæ¥å¢å¼ºæ•°æ®é›†ã€‚æä¾›äº†ç”Ÿæˆéšæœºç´¢å¼•ã€æ›´æ–°æ ‡ç­¾å’Œæ‹¼æ¥æ ‡ç­¾çš„æ–¹æ³•ã€‚
3. **_mosaic4 æ–¹æ³•**ï¼šå®ç°äº† 2x2 çš„é©¬èµ›å…‹å›¾åƒç”Ÿæˆï¼Œè´Ÿè´£å°†å››å¼ å›¾åƒæ”¾ç½®åœ¨é©¬èµ›å…‹çš„ä¸åŒä½ç½®ã€‚
4. **_update_labels æ–¹æ³•**ï¼šæ›´æ–°æ ‡ç­¾çš„è¾¹ç•Œæ¡†ä¿¡æ¯ï¼Œç¡®ä¿åœ¨é©¬èµ›å…‹å›¾åƒä¸­æ­£ç¡®åæ˜ æ¯ä¸ªå®ä¾‹çš„ä½ç½®ã€‚
5. **_cat_labels æ–¹æ³•**ï¼šåˆå¹¶æ‰€æœ‰é©¬èµ›å…‹å›¾åƒçš„æ ‡ç­¾ï¼Œè¿”å›æœ€ç»ˆçš„æ ‡ç­¾å­—å…¸ã€‚

è¿™äº›æ ¸å¿ƒéƒ¨åˆ†æ„æˆäº†å›¾åƒå¢å¼ºè¿‡ç¨‹ä¸­çš„é‡è¦ç¯èŠ‚ï¼Œæœ‰åŠ©äºæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `code\ultralytics\data\augment.py` æ˜¯ç”¨äºå›¾åƒå¢å¼ºçš„å·¥å…·ï¼Œä¸»è¦åº”ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œå¦‚ç›®æ ‡æ£€æµ‹å’Œå›¾åƒåˆ†ç±»ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†å¤šä¸ªç±»å’Œæ–¹æ³•ï¼Œæ—¨åœ¨å¯¹è¾“å…¥å›¾åƒåŠå…¶æ ‡ç­¾è¿›è¡Œå„ç§å˜æ¢å’Œå¢å¼ºï¼Œä»¥æé«˜æ¨¡å‹çš„é²æ£’æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶ä¸­å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬æ•°å­¦åº“ã€éšæœºæ•°ç”Ÿæˆåº“ã€OpenCVã€NumPyã€PyTorch å’Œä¸€äº›è‡ªå®šä¹‰çš„å·¥å…·å‡½æ•°ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€äº›å¸¸é‡ï¼Œå¦‚é»˜è®¤çš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œç”¨äºå›¾åƒå½’ä¸€åŒ–ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ä¸ª `BaseTransform` ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œç”¨äºå¤„ç†å›¾åƒå˜æ¢ã€‚å®ƒåŒ…å«äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨äºåº”ç”¨ä¸åŒç±»å‹çš„å˜æ¢ï¼Œå¦‚å›¾åƒã€å®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²çš„å˜æ¢ã€‚è¯¥ç±»çš„è®¾è®¡ä½¿å¾—å®ƒå¯ä»¥è¢«æ‰©å±•ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„å›¾åƒå¤„ç†éœ€æ±‚ã€‚

`Compose` ç±»ç”¨äºç»„åˆå¤šä¸ªå›¾åƒå˜æ¢ï¼Œå…è®¸ç”¨æˆ·å°†å¤šä¸ªå˜æ¢æŒ‰é¡ºåºåº”ç”¨äºè¾“å…¥æ•°æ®ã€‚è¿™ä¸ªç±»çš„è®¾è®¡ä½¿å¾—ç”¨æˆ·å¯ä»¥çµæ´»åœ°æ·»åŠ ã€åˆ é™¤æˆ–é‡æ–°æ’åˆ—å˜æ¢ã€‚

`BaseMixTransform` ç±»æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œç”¨äºå®ç°æ··åˆå¢å¼ºï¼ˆå¦‚ MixUp å’Œ Mosaicï¼‰ã€‚è¿™ä¸ªç±»çš„å­ç±»å¯ä»¥å®ç°å…·ä½“çš„æ··åˆå¢å¼ºé€»è¾‘ã€‚`Mosaic` ç±»ç”¨äºå°†å¤šä¸ªå›¾åƒç»„åˆæˆä¸€ä¸ªé©¬èµ›å…‹å›¾åƒï¼Œé€šè¿‡åœ¨ç»™å®šæ¦‚ç‡ä¸‹é€‰æ‹©å¤šä¸ªå›¾åƒå¹¶å°†å®ƒä»¬æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå¢å¼ºäº†æ•°æ®çš„å¤šæ ·æ€§ã€‚

`MixUp` ç±»åˆ™å®ç°äº† MixUp å¢å¼ºï¼Œé€šè¿‡å°†ä¸¤å¼ å›¾åƒåŠå…¶æ ‡ç­¾è¿›è¡Œçº¿æ€§ç»„åˆï¼Œç”Ÿæˆæ–°çš„å›¾åƒå’Œæ ‡ç­¾ã€‚è¿™ç§æ–¹æ³•æœ‰åŠ©äºç”Ÿæˆæ›´å¤šçš„è®­ç»ƒæ ·æœ¬ï¼Œä»è€Œæé«˜æ¨¡å‹çš„æ€§èƒ½ã€‚

`RandomPerspective` ç±»å®ç°äº†éšæœºé€è§†å˜æ¢å’Œä»¿å°„å˜æ¢ï¼Œå¯ä»¥å¯¹å›¾åƒåŠå…¶å¯¹åº”çš„è¾¹ç•Œæ¡†ã€åˆ†å‰²å’Œå…³é”®ç‚¹è¿›è¡Œæ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾å’Œå‰ªåˆ‡ç­‰æ“ä½œã€‚è¿™äº›å˜æ¢å¯ä»¥æ ¹æ®ç»™å®šçš„æ¦‚ç‡è¿›è¡Œåº”ç”¨ï¼Œå¢åŠ äº†æ•°æ®çš„å¤šæ ·æ€§ã€‚

`RandomHSV` ç±»è´Ÿè´£å¯¹å›¾åƒçš„è‰²è°ƒã€é¥±å’Œåº¦å’Œäº®åº¦è¿›è¡Œéšæœºè°ƒæ•´ï¼Œä»¥å¢å¼ºå›¾åƒçš„è‰²å½©å˜åŒ–ã€‚`RandomFlip` ç±»åˆ™ç”¨äºéšæœºç¿»è½¬å›¾åƒï¼Œå¯ä»¥æ˜¯æ°´å¹³ç¿»è½¬æˆ–å‚ç›´ç¿»è½¬ï¼Œå¹¶ç›¸åº”åœ°æ›´æ–°å®ä¾‹ï¼ˆå¦‚è¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹ï¼‰ã€‚

`LetterBox` ç±»ç”¨äºè°ƒæ•´å›¾åƒå¤§å°å¹¶è¿›è¡Œå¡«å……ï¼Œä»¥é€‚åº”ç›®æ ‡æ£€æµ‹ã€å®ä¾‹åˆ†å‰²å’Œå§¿æ€ä¼°è®¡ä»»åŠ¡ã€‚å®ƒç¡®ä¿å›¾åƒåœ¨ä¿æŒçºµæ¨ªæ¯”çš„åŒæ—¶ï¼Œè°ƒæ•´åˆ°æŒ‡å®šçš„å½¢çŠ¶ï¼Œå¹¶åœ¨å¿…è¦æ—¶æ·»åŠ è¾¹æ¡†ã€‚

`CopyPaste` ç±»å®ç°äº†å›¾åƒçš„å¤åˆ¶ç²˜è´´å¢å¼ºï¼Œèƒ½å¤Ÿå°†ä¸€ä¸ªå›¾åƒçš„å®ä¾‹å¤åˆ¶åˆ°å¦ä¸€ä¸ªå›¾åƒä¸Šï¼Œä»è€Œç”Ÿæˆæ–°çš„è®­ç»ƒæ ·æœ¬ã€‚

`Albumentations` ç±»æä¾›äº†ä¸€ç³»åˆ—é¢å¤–çš„å¢å¼ºæ–¹æ³•ï¼Œåˆ©ç”¨ç¬¬ä¸‰æ–¹åº“ `albumentations` æ¥å®ç°æ¨¡ç³Šã€å¯¹æ¯”åº¦è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ã€éšæœºäº®åº¦å’Œå¯¹æ¯”åº¦å˜åŒ–ç­‰ã€‚

æœ€åï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€äº›ç”¨äºåˆ†ç±»ä»»åŠ¡çš„å¢å¼ºæ–¹æ³•ï¼ŒåŒ…æ‹¬ `classify_transforms` å’Œ `classify_augmentations`ï¼Œè¿™äº›æ–¹æ³•åˆ©ç”¨ PyTorch çš„ `torchvision.transforms` æ¨¡å—è¿›è¡Œå›¾åƒé¢„å¤„ç†å’Œå¢å¼ºã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„æ¡†æ¶ï¼Œç”¨äºå¯¹å›¾åƒè¿›è¡Œå¤šç§å¢å¼ºå¤„ç†ï¼Œä»¥æé«˜è®¡ç®—æœºè§†è§‰æ¨¡å‹çš„è®­ç»ƒæ•ˆæœå’Œæ€§èƒ½ã€‚

#### 11.4 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\hub\session.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import signal
import sys
from time import sleep
import requests
from ultralytics.hub.utils import HUB_API_ROOT, HUB_WEB_ROOT, smart_request
from ultralytics.utils import LOGGER, is_colab
from ultralytics.utils.errors import HUBModelError

AGENT_NAME = f'python-{__version__}-colab' if is_colab() else f'python-{__version__}-local'

class HUBTrainingSession:
    """
    HUBTrainingSessionç±»ç”¨äºUltralytics HUB YOLOæ¨¡å‹çš„è®­ç»ƒä¼šè¯ï¼Œå¤„ç†æ¨¡å‹åˆå§‹åŒ–ã€å¿ƒè·³å’Œæ£€æŸ¥ç‚¹ä¸Šä¼ ã€‚
    """

    def __init__(self, url):
        """
        åˆå§‹åŒ–HUBTrainingSessionï¼Œä½¿ç”¨æä¾›çš„æ¨¡å‹æ ‡è¯†ç¬¦ã€‚

        å‚æ•°:
            url (str): ç”¨äºåˆå§‹åŒ–HUBè®­ç»ƒä¼šè¯çš„æ¨¡å‹æ ‡è¯†ç¬¦ã€‚
        """
        from ultralytics.hub.auth import Auth

        # è§£æè¾“å…¥çš„æ¨¡å‹URL
        if url.startswith(f'{HUB_WEB_ROOT}/models/'):
            url = url.split(f'{HUB_WEB_ROOT}/models/')[-1]
        if [len(x) for x in url.split('_')] == [42, 20]:
            key, model_id = url.split('_')
        elif len(url) == 20:
            key, model_id = '', url
        else:
            raise HUBModelError(f"model='{url}' not found. Check format is correct.")

        # æˆæƒ
        auth = Auth(key)
        self.model_id = model_id
        self.model_url = f'{HUB_WEB_ROOT}/models/{model_id}'
        self.api_url = f'{HUB_API_ROOT}/v1/models/{model_id}'
        self.auth_header = auth.get_auth_header()
        self.alive = True
        self._start_heartbeat()  # å¯åŠ¨å¿ƒè·³
        self._register_signal_handlers()  # æ³¨å†Œä¿¡å·å¤„ç†å™¨
        LOGGER.info(f'æŸ¥çœ‹æ¨¡å‹: {self.model_url} ğŸš€')

    def _register_signal_handlers(self):
        """æ³¨å†Œä¿¡å·å¤„ç†å™¨ä»¥ä¼˜é›…åœ°å¤„ç†ç»ˆæ­¢ä¿¡å·ã€‚"""
        signal.signal(signal.SIGTERM, self._handle_signal)
        signal.signal(signal.SIGINT, self._handle_signal)

    def _handle_signal(self, signum, frame):
        """
        å¤„ç†ç»ˆæ­¢ä¿¡å·ï¼Œåœæ­¢å¿ƒè·³å¹¶é€€å‡ºç¨‹åºã€‚
        """
        if self.alive:
            LOGGER.info('æ¥æ”¶åˆ°ç»ˆæ­¢ä¿¡å·! âŒ')
            self._stop_heartbeat()
            sys.exit(signum)

    def _stop_heartbeat(self):
        """ç»ˆæ­¢å¿ƒè·³å¾ªç¯ã€‚"""
        self.alive = False

    @threaded
    def _start_heartbeat(self):
        """å¼€å§‹ä¸€ä¸ªçº¿ç¨‹çš„å¿ƒè·³å¾ªç¯ï¼Œå®šæœŸæŠ¥å‘Šä»£ç†çš„çŠ¶æ€ã€‚"""
        while self.alive:
            smart_request('post',
                          f'{HUB_API_ROOT}/v1/agent/heartbeat/models/{self.model_id}',
                          json={'agent': AGENT_NAME},
                          headers=self.auth_header)
            sleep(300)  # æ¯300ç§’å‘é€ä¸€æ¬¡å¿ƒè·³

    def upload_metrics(self):
        """ä¸Šä¼ æ¨¡å‹çš„æŒ‡æ ‡åˆ°Ultralytics HUBã€‚"""
        payload = {'metrics': self.metrics_queue.copy(), 'type': 'metrics'}
        smart_request('post', self.api_url, json=payload, headers=self.auth_header)

    def upload_model(self, epoch, weights, is_best=False, map=0.0, final=False):
        """
        ä¸Šä¼ æ¨¡å‹æ£€æŸ¥ç‚¹åˆ°Ultralytics HUBã€‚

        å‚æ•°:
            epoch (int): å½“å‰è®­ç»ƒçš„è½®æ¬¡ã€‚
            weights (str): æ¨¡å‹æƒé‡æ–‡ä»¶çš„è·¯å¾„ã€‚
            is_best (bool): å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¥½çš„æ¨¡å‹ã€‚
            map (float): æ¨¡å‹çš„å¹³å‡ç²¾åº¦ã€‚
            final (bool): æ¨¡å‹æ˜¯å¦ä¸ºè®­ç»ƒåçš„æœ€ç»ˆæ¨¡å‹ã€‚
        """
        if Path(weights).is_file():
            with open(weights, 'rb') as f:
                file = f.read()
        else:
            LOGGER.warning(f'æ¨¡å‹ä¸Šä¼ é—®é¢˜: ç¼ºå°‘æ¨¡å‹ {weights}.')
            file = None

        url = f'{self.api_url}/upload'
        data = {'epoch': epoch}
        if final:
            data.update({'type': 'final', 'map': map})
            smart_request('post', url, data=data, files={'final_model.pt': file}, headers=self.auth_header)
        else:
            data.update({'type': 'epoch', 'isBest': bool(is_best)})
            smart_request('post', url, data=data, files={'last_model.pt': file}, headers=self.auth_header)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **ç±»çš„å®šä¹‰**ï¼š`HUBTrainingSession`ç±»ç”¨äºç®¡ç†Ultralytics HUBçš„è®­ç»ƒä¼šè¯ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åˆå§‹åŒ–ã€å¿ƒè·³æœºåˆ¶å’ŒæŒ‡æ ‡ä¸Šä¼ ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨`__init__`æ–¹æ³•ä¸­ï¼Œè§£æè¾“å…¥çš„æ¨¡å‹URLå¹¶è¿›è¡Œæˆæƒï¼Œè®¾ç½®æ¨¡å‹çš„ç›¸å…³å±æ€§ï¼Œå¹¶å¯åŠ¨å¿ƒè·³æœºåˆ¶ã€‚
3. **ä¿¡å·å¤„ç†**ï¼šæ³¨å†Œäº†å¯¹ç»ˆæ­¢ä¿¡å·çš„å¤„ç†ï¼Œç¡®ä¿åœ¨æ¥æ”¶åˆ°ä¿¡å·æ—¶èƒ½å¤Ÿä¼˜é›…åœ°åœæ­¢å¿ƒè·³å¹¶é€€å‡ºç¨‹åºã€‚
4. **å¿ƒè·³æœºåˆ¶**ï¼šé€šè¿‡ä¸€ä¸ªçº¿ç¨‹å®šæœŸå‘Ultralytics HUBå‘é€å¿ƒè·³è¯·æ±‚ï¼ŒæŠ¥å‘Šä»£ç†çš„çŠ¶æ€ã€‚
5. **ä¸Šä¼ æŒ‡æ ‡å’Œæ¨¡å‹**ï¼šæä¾›äº†ä¸Šä¼ æ¨¡å‹æŒ‡æ ‡å’Œæ¨¡å‹æ£€æŸ¥ç‚¹çš„æ–¹æ³•ï¼Œç¡®ä¿è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®èƒ½å¤ŸåŠæ—¶åé¦ˆåˆ°Ultralytics HUBã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºUltralytics HUB YOLOæ¨¡å‹è®­ç»ƒä¼šè¯çš„Pythonç±»ï¼Œåä¸º`HUBTrainingSession`ã€‚å®ƒä¸»è¦è´Ÿè´£æ¨¡å‹çš„åˆå§‹åŒ–ã€å¿ƒè·³ä¿¡å·çš„å‘é€ä»¥åŠæ£€æŸ¥ç‚¹çš„ä¸Šä¼ ã€‚ç¨‹åºå¼€å§‹æ—¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬ä¿¡å·å¤„ç†ã€ç³»ç»Ÿæ“ä½œã€è·¯å¾„å¤„ç†ã€æ—¶é—´å»¶è¿Ÿå’ŒHTTPè¯·æ±‚ç­‰ã€‚

åœ¨ç±»çš„æ„é€ å‡½æ•°`__init__`ä¸­ï¼Œæ¥æ”¶ä¸€ä¸ªæ¨¡å‹æ ‡è¯†ç¬¦`url`ï¼Œå¹¶è§£æè¿™ä¸ªæ ‡è¯†ç¬¦ä»¥è·å–æ¨¡å‹çš„å…³é”®ä¿¡æ¯ã€‚æ ¹æ®è¾“å…¥çš„URLæ ¼å¼ï¼Œç¨‹åºä¼šæå–å‡ºæ¨¡å‹çš„å¯†é’¥å’Œæ¨¡å‹IDï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æˆæƒã€‚å¦‚æœæä¾›çš„æ¨¡å‹æ ‡è¯†ç¬¦æ ¼å¼ä¸æ­£ç¡®ï¼Œç¨‹åºä¼šæŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¼‚å¸¸`HUBModelError`ã€‚æ¥ä¸‹æ¥ï¼Œç¨‹åºä¼šè®¾ç½®ä¸€äº›å±æ€§ï¼Œå¦‚æ¨¡å‹çš„URLã€API URLã€è®¤è¯å¤´ã€é€Ÿç‡é™åˆ¶ã€è®¡æ—¶å™¨ã€æ¨¡å‹çš„åº¦é‡é˜Ÿåˆ—ä»¥åŠä»Ultralytics HUBè·å–çš„æ¨¡å‹æ•°æ®ã€‚ç„¶åï¼Œå®ƒä¼šå¯åŠ¨å¿ƒè·³ä¿¡å·çš„å‘é€ï¼Œå¹¶æ³¨å†Œä¿¡å·å¤„ç†ç¨‹åºï¼Œä»¥ä¾¿åœ¨æ¥æ”¶åˆ°ç»ˆæ­¢ä¿¡å·æ—¶èƒ½å¤Ÿä¼˜é›…åœ°å¤„ç†ç¨‹åºçš„é€€å‡ºã€‚

ç¨‹åºä¸­è¿˜å®šä¹‰äº†ä¸€äº›ç§æœ‰æ–¹æ³•ã€‚`_register_signal_handlers`ç”¨äºæ³¨å†Œä¿¡å·å¤„ç†ç¨‹åºï¼Œ`_handle_signal`ç”¨äºå¤„ç†ç»ˆæ­¢ä¿¡å·ï¼Œç¡®ä¿åœ¨Colabç¯å¢ƒä¸­ç»ˆæ­¢åä¸å†å‘é€å¿ƒè·³ä¿¡å·ã€‚`_stop_heartbeat`åˆ™ç”¨äºåœæ­¢å¿ƒè·³å¾ªç¯ã€‚`upload_metrics`æ–¹æ³•ç”¨äºå°†æ¨¡å‹çš„åº¦é‡æ•°æ®ä¸Šä¼ åˆ°Ultralytics HUBã€‚`_get_model`æ–¹æ³•åˆ™è´Ÿè´£ä»Ultralytics HUBè·å–æ¨¡å‹æ•°æ®ï¼Œå¹¶æ ¹æ®æ¨¡å‹çš„çŠ¶æ€å†³å®šæ˜¯å¼€å§‹æ–°çš„è®­ç»ƒè¿˜æ˜¯æ¢å¤å·²æœ‰çš„è®­ç»ƒã€‚

æ­¤å¤–ï¼Œ`upload_model`æ–¹æ³•ç”¨äºå°†æ¨¡å‹çš„æ£€æŸ¥ç‚¹ä¸Šä¼ åˆ°Ultralytics HUBã€‚å®ƒä¼šæ ¹æ®å½“å‰çš„è®­ç»ƒå‘¨æœŸã€æƒé‡æ–‡ä»¶çš„è·¯å¾„ã€æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹ç­‰ä¿¡æ¯è¿›è¡Œä¸Šä¼ ã€‚æœ€åï¼Œ`_start_heartbeat`æ–¹æ³•æ˜¯ä¸€ä¸ªçº¿ç¨‹åŒ–çš„å¿ƒè·³å¾ªç¯ï¼Œå®šæœŸå‘Ultralytics HUBæŠ¥å‘Šä»£ç†çš„çŠ¶æ€ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªç±»çš„è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·åœ¨Ultralytics HUBä¸Šè¿›è¡ŒYOLOæ¨¡å‹çš„è®­ç»ƒå’Œç®¡ç†ï¼Œæä¾›äº†å¿…è¦çš„åŠŸèƒ½æ¥å¤„ç†æ¨¡å‹çš„ä¸Šä¼ ã€çŠ¶æ€ç›‘æ§å’Œé”™è¯¯å¤„ç†ã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\dvc.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
from ultralytics.utils import LOGGER, SETTINGS, TESTS_RUNNING, checks

try:
    # ç¡®ä¿æµ‹è¯•æœªè¿è¡Œï¼Œå¹¶ä¸”DVCé›†æˆå·²å¯ç”¨
    assert not TESTS_RUNNING  
    assert SETTINGS['dvc'] is True  
    import dvclive  # å¯¼å…¥DVCLiveåº“
    assert checks.check_version('dvclive', '2.11.0', verbose=True)  # æ£€æŸ¥DVCLiveç‰ˆæœ¬

    import os
    import re
    from pathlib import Path

    # DVCLiveæ—¥å¿—è®°å½•å®ä¾‹
    live = None
    _processed_plots = {}  # è®°å½•å·²å¤„ç†çš„å›¾è¡¨

    # ç”¨äºåŒºåˆ†æœ€ä½³æ¨¡å‹çš„æœ€ç»ˆè¯„ä¼°ä¸æœ€åä¸€ä¸ªepochéªŒè¯çš„æ ‡å¿—
    _training_epoch = False

except (ImportError, AssertionError, TypeError):
    dvclive = None  # å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œè®¾ç½®dvcliveä¸ºNone


def _log_images(path, prefix=''):
    """è®°å½•æŒ‡å®šè·¯å¾„çš„å›¾åƒï¼Œå¸¦æœ‰å¯é€‰å‰ç¼€ã€‚"""
    if live:  # å¦‚æœDVCLiveå®ä¾‹å­˜åœ¨
        name = path.name
        # æ ¹æ®æ‰¹æ¬¡åˆ†ç»„å›¾åƒï¼Œä»¥ä¾¿åœ¨UIä¸­å¯ç”¨æ»‘å—
        m = re.search(r'_batch(\d+)', name)
        if m:
            ni = m[1]
            new_stem = re.sub(r'_batch(\d+)', '_batch', path.stem)
            name = (Path(new_stem) / ni).with_suffix(path.suffix)

        live.log_image(os.path.join(prefix, name), path)  # è®°å½•å›¾åƒ


def on_pretrain_routine_start(trainer):
    """åœ¨é¢„è®­ç»ƒä¾‹ç¨‹å¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveæ—¥å¿—è®°å½•å™¨ã€‚"""
    try:
        global live
        live = dvclive.Live(save_dvc_exp=True, cache_images=True)  # åˆ›å»ºDVCLiveå®ä¾‹
        LOGGER.info("DVCLiveå·²æ£€æµ‹åˆ°ï¼Œè‡ªåŠ¨è®°å½•å·²å¯ç”¨ã€‚")
    except Exception as e:
        LOGGER.warning(f'è­¦å‘Š âš ï¸ DVCLiveå®‰è£…ä½†æœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæœªè®°å½•æ­¤è¿è¡Œã€‚ {e}')


def on_train_start(trainer):
    """å¦‚æœDVCLiveæ—¥å¿—è®°å½•å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œåˆ™è®°å½•è®­ç»ƒå‚æ•°ã€‚"""
    if live:
        live.log_params(trainer.args)  # è®°å½•è®­ç»ƒå‚æ•°


def on_fit_epoch_end(trainer):
    """åœ¨æ¯ä¸ªfit epochç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ã€‚"""
    global _training_epoch
    if live and _training_epoch:  # å¦‚æœDVCLiveå­˜åœ¨ä¸”å½“å‰ä¸ºè®­ç»ƒepoch
        all_metrics = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics, **trainer.lr}
        for metric, value in all_metrics.items():
            live.log_metric(metric, value)  # è®°å½•æ¯ä¸ªæŒ‡æ ‡

        _training_epoch = False  # ç»“æŸå½“å‰è®­ç»ƒepoch


def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ä½³æŒ‡æ ‡ã€å›¾è¡¨å’Œæ··æ·†çŸ©é˜µã€‚"""
    if live:
        all_metrics = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics, **trainer.lr}
        for metric, value in all_metrics.items():
            live.log_metric(metric, value, plot=False)  # è®°å½•æœ€ä½³æŒ‡æ ‡

        # è®°å½•æ··æ·†çŸ©é˜µ
        if trainer.validator:
            _log_confusion_matrix(trainer.validator)

        live.end()  # ç»“æŸDVCLiveè®°å½•


# å®šä¹‰å›è°ƒå‡½æ•°å­—å…¸
callbacks = {
    'on_pretrain_routine_start': on_pretrain_routine_start,
    'on_train_start': on_train_start,
    'on_fit_epoch_end': on_fit_epoch_end,
    'on_train_end': on_train_end
} if dvclive else {}
```

### ä»£ç è¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼šå¯¼å…¥å¿…è¦çš„åº“å’Œæ¨¡å—ï¼Œç¡®ä¿DVCé›†æˆå¯ç”¨ã€‚
2. **DVCLiveå®ä¾‹**ï¼šåˆ›å»ºä¸€ä¸ª`live`å®ä¾‹ç”¨äºè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚
3. **æ—¥å¿—è®°å½•å‡½æ•°**ï¼š
   - `_log_images`ï¼šè®°å½•å›¾åƒï¼Œæ”¯æŒæŒ‰æ‰¹æ¬¡åˆ†ç»„ã€‚
   - `on_pretrain_routine_start`ï¼šåœ¨é¢„è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveã€‚
   - `on_train_start`ï¼šè®°å½•è®­ç»ƒå‚æ•°ã€‚
   - `on_fit_epoch_end`ï¼šåœ¨æ¯ä¸ªè®­ç»ƒepochç»“æŸæ—¶è®°å½•æŒ‡æ ‡ã€‚
   - `on_train_end`ï¼šåœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ä½³æŒ‡æ ‡å’Œæ··æ·†çŸ©é˜µã€‚
4. **å›è°ƒå‡½æ•°**ï¼šæ ¹æ®DVCLiveçš„å¯ç”¨æ€§å®šä¹‰å›è°ƒå‡½æ•°å­—å…¸ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOï¼ˆYou Only Look Onceï¼‰ç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›è°ƒå‡½æ•°å®ç°ï¼Œä¸»è¦ç›®çš„æ˜¯é›†æˆDVCLiveå·¥å…·ä»¥è®°å½•å’Œå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚æ–‡ä»¶ä¸­é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œåº“ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•å™¨ã€è®¾ç½®å’Œæ£€æŸ¥å·¥å…·ç­‰ã€‚æ¥ç€ï¼Œé€šè¿‡ä¸€äº›æ–­è¨€æ¥ç¡®ä¿åœ¨è¿è¡Œæµ‹è¯•æ—¶ä¸è®°å½•æ—¥å¿—ï¼Œå¹¶éªŒè¯DVCLiveçš„é›†æˆæ˜¯å¦å¯ç”¨ã€‚

åœ¨ç¨‹åºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®šä¹‰äº†ä¸€äº›ç”¨äºè®°å½•è®­ç»ƒè¿‡ç¨‹çš„å‡½æ•°ã€‚`_log_images`å‡½æ•°ç”¨äºè®°å½•æŒ‡å®šè·¯å¾„ä¸‹çš„å›¾åƒï¼Œå¹¶æ ¹æ®éœ€è¦æ·»åŠ å‰ç¼€ã€‚`_log_plots`å‡½æ•°åˆ™ç”¨äºè®°å½•è®­ç»ƒè¿›åº¦ä¸­çš„å›¾åƒï¼Œå¦‚æœè¿™äº›å›¾åƒä¹‹å‰æ²¡æœ‰è¢«å¤„ç†è¿‡ã€‚`_log_confusion_matrix`å‡½æ•°ç”¨äºè®°å½•æ··æ·†çŸ©é˜µï¼Œè¿™å¯¹äºè¯„ä¼°æ¨¡å‹çš„åˆ†ç±»æ€§èƒ½éå¸¸é‡è¦ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€äº›å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ã€‚`on_pretrain_routine_start`å‡½æ•°åœ¨é¢„è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveè®°å½•å™¨ï¼Œå¹¶è®°å½•ç›¸å…³ä¿¡æ¯ã€‚`on_pretrain_routine_end`å‡½æ•°åœ¨é¢„è®­ç»ƒç»“æŸæ—¶è®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›¾åƒã€‚`on_train_start`å‡½æ•°åœ¨è®­ç»ƒå¼€å§‹æ—¶è®°å½•è®­ç»ƒå‚æ•°ã€‚

åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸå¼€å§‹æ—¶ï¼Œ`on_train_epoch_start`å‡½æ•°å°†ä¸€ä¸ªå…¨å±€å˜é‡è®¾ç½®ä¸ºTrueï¼Œä»¥æŒ‡ç¤ºå½“å‰æ­£åœ¨è¿›è¡Œè®­ç»ƒå‘¨æœŸã€‚`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ï¼Œå¹¶å‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤ã€‚æœ€åï¼Œ`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ä½³æŒ‡æ ‡ã€å›¾åƒå’Œæ··æ·†çŸ©é˜µï¼Œå¹¶ç»“æŸDVCLiveçš„è®°å½•ã€‚

æ–‡ä»¶çš„æœ€åéƒ¨åˆ†å®šä¹‰äº†ä¸€ä¸ªå›è°ƒå­—å…¸ï¼Œå°†ä¸Šè¿°å›è°ƒå‡½æ•°ä¸ç›¸åº”çš„äº‹ä»¶å…³è”èµ·æ¥ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨è°ƒç”¨è¿™äº›å‡½æ•°ã€‚æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡DVCLiveå·¥å…·å¯¹YOLOç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹è¿›è¡Œè¯¦ç»†çš„è®°å½•å’Œå¯è§†åŒ–ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œåˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

#### 11.6 train.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import random
import numpy as np
import torch.nn as nn
from ultralytics.data import build_dataloader, build_yolo_dataset
from ultralytics.engine.trainer import BaseTrainer
from ultralytics.models import yolo
from ultralytics.nn.tasks import DetectionModel
from ultralytics.utils import LOGGER, RANK
from ultralytics.utils.torch_utils import de_parallel, torch_distributed_zero_first

class DetectionTrainer(BaseTrainer):
    """
    åŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œ`train`è¡¨ç¤ºè®­ç»ƒæ¨¡å¼ï¼Œ`val`è¡¨ç¤ºéªŒè¯æ¨¡å¼ã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº`rect`æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)  # è·å–æ¨¡å‹çš„æœ€å¤§æ­¥å¹…
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­ï¼Œä»…åˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†
            dataset = self.build_dataset(dataset_path, mode, batch_size)
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©æ–°çš„å›¾åƒå¤§å°
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è°ƒæ•´å›¾åƒå¤§å°
            batch["img"] = imgs
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥å¿…è¦çš„åº“**ï¼šå¼•å…¥äº†å¤„ç†æ•°æ®ã€æ„å»ºæ¨¡å‹å’Œå¯è§†åŒ–ç»“æœæ‰€éœ€çš„åº“ã€‚
2. **DetectionTrainerç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹çš„ç±»ï¼Œç»§æ‰¿è‡ªåŸºç¡€è®­ç»ƒç±»`BaseTrainer`ã€‚
3. **build_datasetæ–¹æ³•**ï¼šæ ¹æ®ç»™å®šçš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼æ„å»ºYOLOæ•°æ®é›†ï¼Œè¿”å›æ„å»ºå¥½çš„æ•°æ®é›†ã€‚
4. **get_dataloaderæ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚
5. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¯èƒ½çš„ç¼©æ”¾ã€‚
6. **get_modelæ–¹æ³•**ï¼šè¿”å›ä¸€ä¸ªYOLOæ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
7. **plot_training_samplesæ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ³¨é‡Šï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ã€‚
8. **plot_metricsæ–¹æ³•**ï¼šä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ï¼Œå¸®åŠ©ç›‘æ§æ¨¡å‹æ€§èƒ½ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼ŒåŸºäº Ultralytics æä¾›çš„æ¡†æ¶ã€‚ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º `DetectionTrainer` çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª `BaseTrainer`ï¼Œä¸“é—¨ç”¨äºå¤„ç†ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œé¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ ç›¸å…³çš„åº“ï¼ˆå¦‚ PyTorchï¼‰ä»¥åŠ Ultralytics æä¾›çš„æ•°æ®å¤„ç†å’Œæ¨¡å‹æ„å»ºå·¥å…·ã€‚

`DetectionTrainer` ç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯æ„å»ºæ•°æ®é›†ã€è·å–æ•°æ®åŠ è½½å™¨ã€é¢„å¤„ç†å›¾åƒæ‰¹æ¬¡ã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€è¿›è¡Œæ¨¡å‹éªŒè¯ã€è®°å½•æŸå¤±ã€æ˜¾ç¤ºè®­ç»ƒè¿›åº¦ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

åœ¨ `build_dataset` æ–¹æ³•ä¸­ï¼Œç¨‹åºæ ¹æ®ä¼ å…¥çš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•å…è®¸ç”¨æˆ·ä¸ºä¸åŒçš„æ¨¡å¼è‡ªå®šä¹‰æ•°æ®å¢å¼ºç­–ç•¥ã€‚

`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºå¹¶è¿”å›æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å¼è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®é¡ºåºã€‚

`preprocess_batch` æ–¹æ³•å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚æ­¤æ–¹æ³•è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œéšæœºé€‰æ‹©å›¾åƒå¤§å°è¿›è¡Œè®­ç»ƒã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¾“å…¥æ•°æ®ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„éªŒè¯å™¨ï¼Œè®°å½•æŸå¤±åç§°å¹¶åˆå§‹åŒ–éªŒè¯å™¨ã€‚

`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ï¼Œä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œå¸®åŠ©å¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­è®°å½•çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œä»¥ä¾¿äºåˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº† YOLO æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›äº†çµæ´»çš„æ•°æ®å¤„ç†å’Œå¯è§†åŒ–å·¥å…·ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„è®­ç»ƒå’Œè¯„ä¼°ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥ç¨‹åºåº“æ˜¯ä¸€ä¸ªåŸºäº YOLOï¼ˆYou Only Look Onceï¼‰ç®—æ³•çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œæä¾›äº†å®Œæ•´çš„è®­ç»ƒã€é¢„æµ‹å’Œæ•°æ®å¢å¼ºåŠŸèƒ½ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯ä½¿ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°è¿›è¡Œæ¨¡å‹è®­ç»ƒã€è¯„ä¼°å’Œæ¨ç†ï¼ŒåŒæ—¶æä¾›çµæ´»çš„æ•°æ®å¤„ç†å’Œå¯è§†åŒ–å·¥å…·ã€‚æ•´ä½“æ¶æ„åŒ…æ‹¬å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼Œå¦‚æ•°æ®å¢å¼ºã€æ¨¡å‹è®­ç»ƒã€é¢„æµ‹ã€å›è°ƒç®¡ç†å’Œç”¨æˆ·ç•Œé¢ç­‰ã€‚

- **æ•°æ®å¤„ç†ä¸å¢å¼º**ï¼šé€šè¿‡ `augment.py` æä¾›å¤šç§å›¾åƒå¢å¼ºæŠ€æœ¯ï¼Œä»¥æé«˜æ¨¡å‹çš„é²æ£’æ€§ã€‚
- **æ¨¡å‹è®­ç»ƒ**ï¼š`train.py` å®ç°äº†æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€æ¨¡å‹åˆå§‹åŒ–ã€æŸå¤±è®¡ç®—å’Œè®­ç»ƒç›‘æ§ã€‚
- **é¢„æµ‹ä¸æ¨ç†**ï¼š`predict.py` æä¾›äº†å¯¹è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œæ¨ç†çš„åŠŸèƒ½ï¼Œæ”¯æŒå›¾åƒåˆ†å‰²ä»»åŠ¡ã€‚
- **å›è°ƒä¸ç›‘æ§**ï¼š`dvc.py` è´Ÿè´£è®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ï¼Œå¹¶ä¸ DVCLive å·¥å…·é›†æˆï¼Œæ–¹ä¾¿ç”¨æˆ·å¯è§†åŒ–è®­ç»ƒæ•ˆæœã€‚
- **ä¼šè¯ç®¡ç†**ï¼š`session.py` å¤„ç†ä¸ Ultralytics HUB çš„äº¤äº’ï¼Œæ”¯æŒæ¨¡å‹çš„ä¸Šä¼ å’ŒçŠ¶æ€ç›‘æ§ã€‚
- **ç”¨æˆ·ç•Œé¢**ï¼š`ui.py` æä¾›äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œç”¨äºå¯åŠ¨è®­ç»ƒè¿‡ç¨‹ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                 | åŠŸèƒ½æè¿°                                                     |
|------------------------------------------------------------------------|------------------------------------------------------------|
| `code\ultralytics\models\yolo\segment\predict.py`                     | å®ç° YOLO æ¨¡å‹çš„åˆ†å‰²é¢„æµ‹åŠŸèƒ½ï¼ŒåŒ…æ‹¬åå¤„ç†å’Œç»“æœå°è£…ã€‚      |
| `ui.py`                                                                | æä¾›å‘½ä»¤è¡Œç•Œé¢ï¼Œå…è®¸ç”¨æˆ·å¯åŠ¨æŒ‡å®šçš„è®­ç»ƒè„šæœ¬ã€‚               |
| `code\ultralytics\data\augment.py`                                     | æä¾›å¤šç§å›¾åƒå¢å¼ºæŠ€æœ¯ï¼Œå¢å¼ºè®­ç»ƒæ•°æ®é›†çš„å¤šæ ·æ€§ã€‚             |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\hub\session.py` | ç®¡ç†ä¸ Ultralytics HUB çš„ä¼šè¯ï¼Œå¤„ç†æ¨¡å‹ä¸Šä¼ å’ŒçŠ¶æ€ç›‘æ§ã€‚   |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\dvc.py` | é›†æˆ DVCLive è®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œå¯è§†åŒ–æ•ˆæœã€‚           |
| `train.py`                                                             | å®ç° YOLO æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€æ¨¡å‹åˆå§‹åŒ–å’Œè®­ç»ƒç›‘æ§ã€‚ |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\benchmarks.py` | æä¾›æ¨¡å‹æ€§èƒ½åŸºå‡†æµ‹è¯•åŠŸèƒ½ï¼Œè¯„ä¼°æ¨¡å‹çš„æ¨ç†é€Ÿåº¦å’Œå‡†ç¡®æ€§ã€‚     |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\data\__init__.py` | åˆå§‹åŒ–æ•°æ®æ¨¡å—ï¼Œç®¡ç†æ•°æ®é›†çš„åŠ è½½å’Œå¤„ç†ã€‚                  |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\lsknet.py` | å®šä¹‰ LSKNet æ¨¡å‹çš„ç»“æ„ï¼Œä½œä¸º YOLO çš„éª¨å¹²ç½‘ç»œã€‚              |
| `code\ultralytics\utils\callbacks\dvc.py`                             | è®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ï¼Œæ”¯æŒä¸ DVCLive é›†æˆã€‚               |
| `code\ultralytics\models\sam\amg.py`                                  | å®ç° SAMï¼ˆSegment Anything Modelï¼‰ç›¸å…³çš„åŠŸèƒ½ã€‚             |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\hub\utils.py` | æä¾›ä¸ Ultralytics HUB äº¤äº’çš„å·¥å…·å‡½æ•°ã€‚                    |
| `code\log.py`                                                          | å¤„ç†æ—¥å¿—è®°å½•ï¼Œè·Ÿè¸ªè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¿¡æ¯å’Œé”™è¯¯ã€‚                 |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†å„ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„å’ŒåŠŸèƒ½æ¨¡å—ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šD:\tools\20240905\Temporary](D:\tools\20240905\Temporary)